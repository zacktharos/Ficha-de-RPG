<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha de Personagem RPG</title>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0e6d2; /* Cor de pergaminho padrão */
            color: #000;
            display: flex;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            background-image: none;
            background-size: cover; /* Cobre toda a área */
            background-position: center; /* Centraliza a imagem */
            background-attachment: fixed; /* Fixa a imagem durante o scroll */
            transition: background 0.3s, color 0.3s;
        }
        body.dark-mode {
            background-color: #121212 !important; /* Garante que o fundo seja sempre escuro */
            color: #e0e0e0;
        }
        body.dark-mode .bg-white { background-color: #1e1e1e !important; }
        body.dark-mode .text-gray-800 { color: #e0e0e0 !important; }
        body.dark-mode .text-gray-600 { color: #b0b0b0 !important; }
        body.dark-mode .border-gray-300 { border-color: #444 !important; }
        body.dark-mode input, body.dark-mode textarea, body.dark-mode select {
            background-color: #2c2c2c !important;
            color: #e0e0e0 !important;
            border-color: #555 !important;
        }
        body.dark-mode button:not(.color-option):not(#corFundoBtn):not(#removerPlanoDeFundoBtn):not(#salvarLocalBtn) {
             background-color: #333 !important;
             color: #e0e0e0 !important;
             border-color: #555 !important;
        }
        body.dark-mode button:not(.color-option):not(#corFundoBtn):not(#removerPlanoDeFundoBtn):not(#salvarLocalBtn):hover {
             background-color: #444 !important;
        }
        body.dark-mode #lista-fichas li:hover {
            background-color: #333 !important;
        }
        body.dark-mode #lista-fichas li.active {
            background-color: #004d40 !important; /* Um verde escuro para destaque */
            color: white !important;
        }
        body.dark-mode #sidebar {
            background-color: #1e1e1e !important;
        }
        body.dark-mode #background-color-selector {
             background-color: #2c2c2c !important;
             border-color: #555 !important;
        }
         body.dark-mode #background-color-selector .color-option.active {
            border-color: #fff !important; /* Borda branca para destaque no modo escuro */
        }
         body.dark-mode #background-color-selector .color-option:hover {
            transform: scale(1.15);
            border-color: #aaa !important;
        }

        #sidebar {
            width: 250px;
            background-color: #e0d8c7; /* Cor de pergaminho um pouco mais escura */
            padding: 20px;
            border-right: 2px solid #8b4513; /* Borda marrom simulando madeira */
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            height: calc(100vh - 40px); /* Ajusta altura considerando o padding do body */
            position: sticky; /* Faz o sidebar ficar fixo */
            top: 20px; /* Mantém o padding do body */
        }
        #main-content {
            flex-grow: 1;
            padding-left: 20px;
            max-width: calc(100% - 270px); /* Largura total menos sidebar e padding */
        }
        #lista-fichas {
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
            overflow-y: auto; /* Permite scroll se a lista for grande */
            max-height: calc(100% - 250px); /* Ajustar altura máxima */
            flex-grow: 1;
        }
        #lista-fichas li {
            padding: 10px;
            margin-bottom: 5px;
            border: 1px solid #c8bda9;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
            background-color: #f5f0e5;
        }
        #lista-fichas li:hover {
            background-color: #e5dbc5;
        }
        #lista-fichas li.active {
            background-color: #00796b; /* Verde escuro */
            color: white;
            font-weight: bold;
        }
        .medieval-title {
            font-family: 'MedievalSharp', cursive;
            font-size: 1.5rem; /* 24px */
            text-align: center;
            margin-bottom: 1rem;
            color: #5a3d2b; /* Cor marrom escuro */
        }
        body.dark-mode .medieval-title {
            color: #c5a68a; /* Cor mais clara para modo escuro */
        }
        .sheet-section {
            background-color: rgba(255, 255, 255, 0.7); /* Fundo branco semi-transparente */
            border: 1px solid #b9a08c; /* Borda sutil */
            border-radius: 8px;
            padding: 1.5rem; /* 24px */
            margin-bottom: 1.5rem; /* 24px */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: background-color 0.3s, border-color 0.3s;
        }
         body.dark-mode .sheet-section {
            background-color: rgba(30, 30, 30, 0.8); /* Fundo escuro semi-transparente */
            border-color: #444;
        }
        .sheet-section h2 {
            font-family: 'MedievalSharp', cursive;
            font-size: 1.25rem; /* 20px */
            color: #5a3d2b; /* Marrom escuro */
            border-bottom: 1px solid #8b4513; /* Linha abaixo do título */
            padding-bottom: 0.5rem; /* 8px */
            margin-bottom: 1rem; /* 16px */
        }
        body.dark-mode .sheet-section h2 {
            color: #c5a68a; /* Cor mais clara para modo escuro */
            border-bottom-color: #6a4d3b;
        }
        label {
            display: block;
            margin-bottom: 0.5rem; /* 8px */
            font-weight: 600;
            font-size: 0.875rem; /* 14px */
            color: #3d2c1d; /* Marrom mais escuro */
        }
        body.dark-mode label {
            color: #b0b0b0;
        }
        input[type="text"], input[type="number"], select, textarea {
            width: 100%;
            padding: 0.5rem; /* 8px */
            border: 1px solid #c8bda9; /* Borda cor de pergaminho */
            border-radius: 4px;
            font-size: 0.875rem; /* 14px */
            background-color: #fff; /* Fundo branco */
            transition: border-color 0.2s, background-color 0.2s, color 0.2s;
        }
        input[type="text"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #8b4513; /* Borda marrom ao focar */
            box-shadow: 0 0 0 2px rgba(139, 69, 19, 0.2); /* Sombra sutil ao focar */
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        button:not(.color-option) {
            padding: 0.6rem 1.2rem;
            background-color: #8b4513; /* Marrom madeira */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
            font-size: 0.875rem; /* 14px */
        }
        button:not(.color-option):hover {
            background-color: #a0522d; /* Marrom mais claro */
        }
        .icon-button {
            background: none;
            border: none;
            padding: 5px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .icon-button svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }
        .sidebar-button-container {
            margin-top: auto; /* Empurra os botões para o final do sidebar */
            display: flex;
            flex-direction: column;
            gap: 10px; /* Espaçamento entre botões */
        }
        #control-buttons {
            display: flex;
            flex-wrap: wrap; /* Permite que os botões quebrem linha se necessário */
            gap: 10px; /* Espaçamento entre botões */
            margin-bottom: 15px; /* Espaço antes da lista de fichas */
             justify-content: center; /* Centraliza os botões */
        }
        #control-buttons button, #control-buttons label {
            flex-grow: 1; /* Faz os botões ocuparem espaço disponível */
            min-width: 100px; /* Largura mínima para evitar que fiquem muito estreitos */
        }
        /* Estilos para o Seletor de Cores */
        #background-color-selector {
            display: none; /* Escondido por padrão */
            position: absolute;
            bottom: 70px; /* Posiciona acima do botão */
            left: 20px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex; /* Mudar para flex para layout horizontal */
            gap: 8px; /* Espaçamento entre as opções de cor */
            flex-wrap: wrap; /* Permite quebrar linha se não couber */
        }
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s, border-color 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .color-option:hover {
            transform: scale(1.1);
            border-color: #888;
        }
         .color-option.active {
            border-color: #000; /* Borda preta para a cor ativa */
            transform: scale(1.1);
        }
        #imagemFundoInput { display: none; } /* Esconder input de arquivo padrão */
        .label-arquivo { /* Estilo para o label que substitui o input */
            padding: 0.6rem 1.2rem;
            background-color: #8b4513;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
            font-size: 0.875rem;
            text-align: center;
        }
        .label-arquivo:hover {
            background-color: #a0522d;
        }
         /* Estilo para botão pequeno de remoção */
        .remove-item-btn {
            background-color: #dc2626; /* Vermelho */
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            line-height: 20px; /* Centraliza o 'x' */
            text-align: center;
            cursor: pointer;
            padding: 0;
             margin-left: 8px; /* Espaço à esquerda */
            transition: background-color 0.2s;
        }
        .remove-item-btn:hover {
            background-color: #b91c1c; /* Vermelho mais escuro */
        }
        /* Garante que tabelas ocupem largura total */
        table {
            width: 100%;
            border-collapse: collapse; /* Une as bordas das células */
            margin-top: 1rem; /* Espaço acima da tabela */
        }

        th, td {
            border: 1px solid #c8bda9; /* Borda sutil */
            padding: 0.75rem; /* Espaçamento interno */
            text-align: left; /* Alinhamento padrão */
            font-size: 0.875rem; /* Tamanho de fonte */
        }

        th {
            background-color: #e0d8c7; /* Fundo levemente mais escuro para cabeçalhos */
            font-weight: 600; /* Texto em negrito */
            font-family: 'MedievalSharp', cursive; /* Fonte medieval para cabeçalhos */
        }

        /* Estilos para modo escuro da tabela */
        body.dark-mode table {
             border-color: #444;
        }

        body.dark-mode th, body.dark-mode td {
            border-color: #555; /* Bordas mais escuras */
        }

        body.dark-mode th {
            background-color: #2c2c2c; /* Fundo escuro para cabeçalhos */
            color: #c5a68a; /* Cor de texto clara */
        }

        body.dark-mode td {
            color: #e0e0e0; /* Cor de texto clara para células */
        }

        /* Ajuste para inputs dentro de tabelas */
        td input[type="text"], td input[type="number"], td select, td textarea {
            margin: -0.75rem; /* Remove o padding da célula para o input preencher */
            width: calc(100% + 1.5rem); /* Compensa o padding removido */
            border: none; /* Remove a borda do input, a célula já tem */
            border-radius: 0; /* Remove cantos arredondados */
            padding: 0.75rem; /* Adiciona padding interno ao input */
        }

        body.dark-mode td input[type="text"],
        body.dark-mode td input[type="number"],
        body.dark-mode td select,
        body.dark-mode td textarea {
            background-color: #1e1e1e !important; /* Cor de fundo do input no modo escuro */
            color: #e0e0e0 !important;
        }

        td input:focus, td select:focus, td textarea:focus {
             outline: none;
             box-shadow: none; /* Remove sombra de foco dentro da tabela */
             border: 1px solid #8b4513; /* Adiciona borda de foco sutil */
             margin: -0.75rem -1px; /* Ajusta margem para borda de foco */
             width: calc(100% + 1.5rem + 2px);
        }
        body.dark-mode td input:focus,
        body.dark-mode td select:focus,
        body.dark-mode td textarea:focus {
            border-color: #c5a68a; /* Borda de foco clara no modo escuro */
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <h2 class="medieval-title">Fichas Salvas</h2>

        <div id="control-buttons">
             <button id="novaFichaBtn" title="Criar nova ficha">Nova Ficha</button>
             <button id="salvarLocalBtn" title="Salvar todas as fichas localmente">Salvar Tudo</button>
             <label for="imagemFundoInput" class="label-arquivo" title="Escolher imagem de fundo">Imagem Fundo</label>
            <input type="file" id="imagemFundoInput" accept="image/*">
            <button id="removerPlanoDeFundoBtn" title="Remover imagem de fundo">Remover Img</button>
            <button id="corFundoBtn" title="Selecionar cor de fundo">Cor Fundo</button>
             <button id="toggleDarkMode" title="Alternar modo claro/escuro">Modo Escuro</button>
        </div>

        <div id="background-color-selector">
            <div class="color-option" data-color="#f0e6d2" style="background-color: #f0e6d2;" title="Pergaminho Claro"></div>
            <div class="color-option" data-color="#e0d8c7" style="background-color: #e0d8c7;" title="Pergaminho Médio"></div>
            <div class="color-option" data-color="#c8bda9" style="background-color: #c8bda9;" title="Pergaminho Escuro"></div>
            <div class="color-option" data-color="#ffffff" style="background-color: #ffffff;" title="Branco"></div>
            <div class="color-option" data-color="#d1d5db" style="background-color: #d1d5db;" title="Cinza Claro"></div>
            <div class="color-option" data-color="#6b7280" style="background-color: #6b7280;" title="Cinza Médio"></div>
            </div>

        <ul id="lista-fichas">
            </ul>

        <div class="sidebar-button-container">
            <button id="excluirFichaBtn" style="background-color: #dc2626;" title="Excluir ficha selecionada">Excluir Ficha</button>
        </div>

    </div>

    <div id="main-content">
        <form id="ficha-personagem">
            <div class="sheet-section grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome">
                </div>
                <div>
                    <label for="raca">Raça:</label>
                    <input type="text" id="raca" name="raca">
                </div>
                <div>
                    <label for="classe">Classe:</label>
                    <input type="text" id="classe" name="classe">
                </div>
                <div>
                    <label for="nivel">Nível:</label>
                    <input type="number" id="nivel" name="nivel" min="1" value="1">
                </div>
                 <div>
                    <label for="antecedente">Antecedente:</label>
                    <input type="text" id="antecedente" name="antecedente">
                </div>
                <div>
                    <label for="tendencia">Tendência:</label>
                    <input type="text" id="tendencia" name="tendencia">
                </div>
                 <div>
                    <label for="xp">Experiência (XP):</label>
                    <input type="number" id="xp" name="xp" min="0" value="0">
                </div>
                 <div>
                    <label for="inspiracao">Inspiração:</label>
                    <input type="number" id="inspiracao" name="inspiracao" min="0" value="0">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-6">
                     <div class="sheet-section">
                        <h2>Atributos</h2>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <label for="forca" class="font-bold">FOR</label>
                                <input type="number" id="forca" name="forca" class="text-center text-2xl font-bold border-2 border-gray-400 rounded p-1 w-16 mx-auto block mb-1" value="10">
                                <span id="mod_forca" class="text-sm border border-gray-300 rounded px-1 inline-block">+0</span>
                            </div>
                             <div>
                                <label for="destreza" class="font-bold">DES</label>
                                <input type="number" id="destreza" name="destreza" class="text-center text-2xl font-bold border-2 border-gray-400 rounded p-1 w-16 mx-auto block mb-1" value="10">
                                <span id="mod_destreza" class="text-sm border border-gray-300 rounded px-1 inline-block">+0</span>
                            </div>
                             <div>
                                <label for="constituicao" class="font-bold">CON</label>
                                <input type="number" id="constituicao" name="constituicao" class="text-center text-2xl font-bold border-2 border-gray-400 rounded p-1 w-16 mx-auto block mb-1" value="10">
                                <span id="mod_constituicao" class="text-sm border border-gray-300 rounded px-1 inline-block">+0</span>
                            </div>
                             <div>
                                <label for="inteligencia" class="font-bold">INT</label>
                                <input type="number" id="inteligencia" name="inteligencia" class="text-center text-2xl font-bold border-2 border-gray-400 rounded p-1 w-16 mx-auto block mb-1" value="10">
                                <span id="mod_inteligencia" class="text-sm border border-gray-300 rounded px-1 inline-block">+0</span>
                            </div>
                             <div>
                                <label for="sabedoria" class="font-bold">SAB</label>
                                <input type="number" id="sabedoria" name="sabedoria" class="text-center text-2xl font-bold border-2 border-gray-400 rounded p-1 w-16 mx-auto block mb-1" value="10">
                                <span id="mod_sabedoria" class="text-sm border border-gray-300 rounded px-1 inline-block">+0</span>
                            </div>
                            <div>
                                <label for="carisma" class="font-bold">CAR</label>
                                <input type="number" id="carisma" name="carisma" class="text-center text-2xl font-bold border-2 border-gray-400 rounded p-1 w-16 mx-auto block mb-1" value="10">
                                <span id="mod_carisma" class="text-sm border border-gray-300 rounded px-1 inline-block">+0</span>
                            </div>
                        </div>
                    </div>

                     <div class="sheet-section">
                         <h2>Testes de Resistência</h2>
                         <div id="testes-resistencia" class="space-y-2"></div>
                     </div>

                    <div class="sheet-section">
                         <h2>Perícias</h2>
                         <div id="pericias" class="space-y-2"></div>
                         <div class="mt-4">
                             <label for="bonus_proficiencia">Bônus de Proficiência:</label>
                             <input type="number" id="bonus_proficiencia" name="bonus_proficiencia" class="text-center font-bold border-2 border-gray-400 rounded p-1 w-16" value="2" readonly>
                         </div>
                     </div>
                </div>

                <div class="space-y-6">
                    <div class="sheet-section">
                        <h2>Combate</h2>
                        <div class="grid grid-cols-3 gap-4 text-center mb-4">
                            <div>
                                <label for="ca">Classe de Armadura (CA)</label>
                                <input type="number" id="ca" name="ca" class="text-center text-xl font-bold border-2 border-gray-400 rounded p-1 w-20 mx-auto block" value="10">
                            </div>
                            <div>
                                <label for="iniciativa">Iniciativa</label>
                                <input type="text" id="iniciativa" name="iniciativa" class="text-center text-xl font-bold border-2 border-gray-400 rounded p-1 w-20 mx-auto block" value="+0" readonly>
                            </div>
                            <div>
                                <label for="deslocamento">Deslocamento</label>
                                <input type="text" id="deslocamento" name="deslocamento" class="text-center text-xl font-bold border-2 border-gray-400 rounded p-1 w-20 mx-auto block" value="9m">
                            </div>
                        </div>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                             <div>
                                 <label for="pv_maximos">Pontos de Vida Máximos</label>
                                 <input type="number" id="pv_maximos" name="pv_maximos" min="1" value="10">
                             </div>
                             <div>
                                 <label for="pv_atuais">Pontos de Vida Atuais</label>
                                 <input type="number" id="pv_atuais" name="pv_atuais" value="10">
                             </div>
                         </div>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="pv_temporarios">Pontos de Vida Temporários</label>
                                <input type="number" id="pv_temporarios" name="pv_temporarios" min="0" value="0">
                            </div>
                             <div>
                                <label for="dados_vida">Dados de Vida (Total/Usado)</label>
                                <div class="flex items-center gap-2">
                                    <input type="text" id="dados_vida_total" name="dados_vida_total" placeholder="Ex: 1d8" class="flex-1">
                                    <span>/</span>
                                    <input type="number" id="dados_vida_usados" name="dados_vida_usados" min="0" value="0" class="w-16">
                                </div>
                            </div>
                        </div>
                         <div class="mt-4">
                             <label>Testes Contra a Morte:</label>
                             <div class="flex space-x-4">
                                <div>Sucessos:
                                     <input type="checkbox" id="morte_suc1" name="morte_suc1">
                                     <input type="checkbox" id="morte_suc2" name="morte_suc2">
                                     <input type="checkbox" id="morte_suc3" name="morte_suc3">
                                 </div>
                                 <div>Falhas:
                                     <input type="checkbox" id="morte_falha1" name="morte_falha1">
                                     <input type="checkbox" id="morte_falha2" name="morte_falha2">
                                     <input type="checkbox" id="morte_falha3" name="morte_falha3">
                                 </div>
                            </div>
                        </div>
                    </div>

                     <div class="sheet-section">
                        <h2>Ataques e Magias</h2>
                        <table id="ataques-magias-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Bônus Ataque</th>
                                    <th>Dano / Tipo</th>
                                    <th>Ação</th>
                                </tr>
                            </thead>
                            <tbody id="ataques-magias-tbody">
                                </tbody>
                        </table>
                        <button type="button" id="add-ataque-magia" class="mt-2">Adicionar Ataque/Magia</button>
                    </div>

                    <div class="sheet-section">
                        <h2>Equipamento</h2>
                        <div class="grid grid-cols-5 gap-2 mb-4">
                             <div><label for="pc">PC</label><input type="number" id="pc" name="pc" min="0" value="0"></div>
                            <div><label for="pp">PP</label><input type="number" id="pp" name="pp" min="0" value="0"></div>
                            <div><label for="pe">PE</label><input type="number" id="pe" name="pe" min="0" value="0"></div>
                            <div><label for="po">PO</label><input type="number" id="po" name="po" min="0" value="0"></div>
                            <div><label for="pl">PL</label><input type="number" id="pl" name="pl" min="0" value="0"></div>
                        </div>
                        <textarea id="equipamento" name="equipamento" placeholder="Liste seus equipamentos aqui..."></textarea>
                    </div>
                </div>

                 <div class="space-y-6">
                    <div class="sheet-section">
                        <h2>Personalidade</h2>
                        <div>
                            <label for="tracos_personalidade">Traços de Personalidade:</label>
                            <textarea id="tracos_personalidade" name="tracos_personalidade"></textarea>
                        </div>
                        <div class="mt-4">
                            <label for="ideais">Ideais:</label>
                            <textarea id="ideais" name="ideais"></textarea>
                        </div>
                        <div class="mt-4">
                            <label for="vinculos">Vínculos:</label>
                            <textarea id="vinculos" name="vinculos"></textarea>
                        </div>
                        <div class="mt-4">
                            <label for="fraquezas">Fraquezas:</label>
                            <textarea id="fraquezas" name="fraquezas"></textarea>
                        </div>
                    </div>

                    <div class="sheet-section">
                        <h2>Características e Talentos</h2>
                        <textarea id="caracteristicas_talentos" name="caracteristicas_talentos" placeholder="Liste suas características de classe, raça, talentos, etc..."></textarea>
                    </div>

                     <div class="sheet-section">
                        <h2>Idiomas e Outras Proficiências</h2>
                        <textarea id="idiomas_proficiencias" name="idiomas_proficiencias" placeholder="Liste seus idiomas e proficiências em ferramentas, armas, armaduras..."></textarea>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <script>
        // Configuração do Firebase (substitua com suas credenciais)
        const firebaseConfig = {
             apiKey: "YOUR_API_KEY",
             authDomain: "YOUR_AUTH_DOMAIN",
             databaseURL: "YOUR_DATABASE_URL",
             projectId: "YOUR_PROJECT_ID",
             storageBucket: "YOUR_STORAGE_BUCKET",
             messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
             appId: "YOUR_APP_ID"
        };

        // Comentar a inicialização do Firebase se não for usar
        // firebase.initializeApp(firebaseConfig);
        // const database = firebase.database();

        const fichaForm = document.getElementById('ficha-personagem');
        const listaFichasUl = document.getElementById('lista-fichas');
        const novaFichaBtn = document.getElementById('novaFichaBtn');
        const excluirFichaBtn = document.getElementById('excluirFichaBtn');
        const salvarLocalBtn = document.getElementById('salvarLocalBtn');
        // const conectarFirebaseBtn = document.getElementById('conectarFirebaseBtn');
        // const salvarFirebaseBtn = document.getElementById('salvarFirebaseBtn');
        // const carregarFirebaseBtn = document.getElementById('carregarFirebaseBtn');
        const toggleDarkModeBtn = document.getElementById('toggleDarkMode');
        const imagemFundoInput = document.getElementById('imagemFundoInput');
        const removerPlanoDeFundoBtn = document.getElementById('removerPlanoDeFundoBtn');
        const corFundoBtn = document.getElementById('corFundoBtn');
        const backgroundColorSelector = document.getElementById('background-color-selector');
         const addAtaqueMagiaBtn = document.getElementById('add-ataque-magia');
         const ataquesMagiasTbody = document.getElementById('ataques-magias-tbody');


        let fichas = {}; // Objeto para armazenar todas as fichas
        let currentFichaId = null; // ID da ficha atualmente selecionada

        const atributos = ['forca', 'destreza', 'constituicao', 'inteligencia', 'sabedoria', 'carisma'];
        const periciasBase = {
            'Acrobacia': 'destreza', 'Arcanismo': 'inteligencia', 'Atletismo': 'forca',
            'Atuação': 'carisma', 'Enganação': 'carisma', 'Furtividade': 'destreza',
            'História': 'inteligencia', 'Intimidação': 'carisma', 'Intuição': 'sabedoria',
            'Investigação': 'inteligencia', 'Lidar com Animais': 'sabedoria', 'Medicina': 'sabedoria',
            'Natureza': 'inteligencia', 'Percepção': 'sabedoria', 'Persuasão': 'carisma',
            'Prestidigitação': 'destreza', 'Religião': 'inteligencia', 'Sobrevivência': 'sabedoria'
        };
        const testesResistenciaBase = {
            'Força': 'forca', 'Destreza': 'destreza', 'Constituição': 'constituicao',
            'Inteligência': 'inteligencia', 'Sabedoria': 'sabedoria', 'Carisma': 'carisma'
        };

         // --- Inicialização ---
         document.addEventListener('DOMContentLoaded', () => {
            aplicarTemaSalvo();
            aplicarPlanoDeFundoSalvo();
            aplicarCorDeFundoSalva(); // Aplica cor salva no localStorage
            gerarCamposResistencia();
            gerarCamposPericias();
            carregarFichas(); // Carrega fichas do localStorage
            calcularTodosModificadores();
            setupEventListeners();
            // Seleciona a primeira ficha se existir, ou cria uma nova
            const primeiraFichaId = Object.keys(fichas)[0];
            if (primeiraFichaId) {
                selecionarFicha(primeiraFichaId);
            } else {
                 criarNovaFicha();
            }
         });

        // --- Funções de Geração Dinâmica ---
        function gerarCamposResistencia() {
            const container = document.getElementById('testes-resistencia');
            container.innerHTML = ''; // Limpa antes de gerar
             for (const [nome, atributoBase] of Object.entries(testesResistenciaBase)) {
                 const div = document.createElement('div');
                 div.className = 'flex items-center justify-between';
                 div.innerHTML = `
                     <label for="prof_tr_${atributoBase}" class="flex items-center space-x-2 text-sm">
                         <input type="checkbox" id="prof_tr_${atributoBase}" name="prof_tr_${atributoBase}" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                         <span id="mod_tr_${atributoBase}" class="font-semibold w-6 text-right">+0</span>
                         <span>${nome}</span>
                     </label>
                 `;
                 container.appendChild(div);
             }
        }

         function gerarCamposPericias() {
            const container = document.getElementById('pericias');
            container.innerHTML = ''; // Limpa antes de gerar
            for (const [nome, atributoBase] of Object.entries(periciasBase)) {
                 const div = document.createElement('div');
                 div.className = 'flex items-center justify-between';
                 div.innerHTML = `
                     <label for="prof_${nome.toLowerCase().replace(' ', '_')}" class="flex items-center space-x-2 text-sm">
                         <input type="checkbox" id="prof_${nome.toLowerCase().replace(' ', '_')}" name="prof_${nome.toLowerCase().replace(' ', '_')}" class="form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out">
                         <span id="mod_${nome.toLowerCase().replace(' ', '_')}" class="font-semibold w-6 text-right">+0</span>
                         <span>${nome} (${atributoBase.substring(0, 3).toUpperCase()})</span>
                     </label>
                 `;
                 container.appendChild(div);
            }
        }

        // --- Funções de Cálculo ---
        function calcularModificador(valor) {
            return Math.floor((valor - 10) / 2);
        }

        function atualizarModificadorAtributo(atributo) {
            const input = document.getElementById(atributo);
            const modDisplay = document.getElementById(`mod_${atributo}`);
            if (input && modDisplay) {
                const valor = parseInt(input.value) || 10;
                const mod = calcularModificador(valor);
                modDisplay.textContent = (mod >= 0 ? '+' : '') + mod;
                atualizarPericiasEtestesResistencia(); // Recalcula tudo quando um atributo muda
                 atualizarIniciativa(); // Atualiza iniciativa baseada em destreza
            }
        }

         function calcularBonusProficiencia(nivel) {
            return Math.ceil(nivel / 4) + 1;
        }

        function atualizarBonusProficiencia() {
            const nivelInput = document.getElementById('nivel');
            const bonusProfInput = document.getElementById('bonus_proficiencia');
             if (nivelInput && bonusProfInput) {
                 const nivel = parseInt(nivelInput.value) || 1;
                 const bonus = calcularBonusProficiencia(nivel);
                 bonusProfInput.value = bonus;
                 atualizarPericiasEtestesResistencia(); // Recalcula tudo quando o bônus muda
             }
        }

        function atualizarIniciativa() {
            const modDestreza = parseInt(document.getElementById('mod_destreza')?.textContent || '0');
             const iniciativaInput = document.getElementById('iniciativa');
             if (iniciativaInput) {
                iniciativaInput.value = (modDestreza >= 0 ? '+' : '') + modDestreza;
            }
        }

        function atualizarPericiasEtestesResistencia() {
            const bonusProficiencia = parseInt(document.getElementById('bonus_proficiencia')?.value || '2');

            // Atualizar Testes de Resistência
             for (const [nome, atributoBase] of Object.entries(testesResistenciaBase)) {
                 const modBase = parseInt(document.getElementById(`mod_${atributoBase}`)?.textContent || '0');
                 const profCheckbox = document.getElementById(`prof_tr_${atributoBase}`);
                 const modDisplay = document.getElementById(`mod_tr_${atributoBase}`);
                 if (modDisplay && profCheckbox) {
                     const modFinal = modBase + (profCheckbox.checked ? bonusProficiencia : 0);
                     modDisplay.textContent = (modFinal >= 0 ? '+' : '') + modFinal;
                 }
             }

             // Atualizar Perícias
             for (const [nome, atributoBase] of Object.entries(periciasBase)) {
                 const modBase = parseInt(document.getElementById(`mod_${atributoBase}`)?.textContent || '0');
                 const profCheckbox = document.getElementById(`prof_${nome.toLowerCase().replace(' ', '_')}`);
                 const modDisplay = document.getElementById(`mod_${nome.toLowerCase().replace(' ', '_')}`);
                 if (modDisplay && profCheckbox) {
                     const modFinal = modBase + (profCheckbox.checked ? bonusProficiencia : 0);
                     modDisplay.textContent = (modFinal >= 0 ? '+' : '') + modFinal;
                 }
             }
        }

        function calcularTodosModificadores() {
            atributos.forEach(atributo => atualizarModificadorAtributo(atributo));
             atualizarBonusProficiencia(); // Isso já chama atualizarPericiasEtestesResistencia
             atualizarIniciativa();
        }

        // --- Funções de Persistência (localStorage) ---
        function salvarDados() {
            if (!currentFichaId) return; // Não salva se nenhuma ficha está selecionada

            const fichaData = {};
            const formData = new FormData(fichaForm);
            formData.forEach((value, key) => {
                 // Salva checkboxes como booleanos
                 if (fichaForm.elements[key]?.type === 'checkbox') {
                     fichaData[key] = fichaForm.elements[key].checked;
                 } else {
                    fichaData[key] = value;
                 }
            });

            // Salvar ataques/magias
            fichaData['ataques_magias'] = [];
            const linhasAtaque = ataquesMagiasTbody.querySelectorAll('tr');
            linhasAtaque.forEach(linha => {
                const inputs = linha.querySelectorAll('input, select');
                const ataque = {
                    nome: inputs[0].value,
                    bonus: inputs[1].value,
                    dano: inputs[2].value,
                    acao: inputs[3].value
                };
                fichaData['ataques_magias'].push(ataque);
            });


            fichas[currentFichaId] = fichaData; // Atualiza a ficha atual no objeto 'fichas'
            // salvarFichasLocal(); // Salva todas as fichas no localStorage
             console.log("Dados salvos para a ficha:", currentFichaId);
        }

        function salvarFichasLocal() {
             try {
                 localStorage.setItem('fichasRPG', JSON.stringify(fichas));
                 console.log("Todas as fichas salvas localmente.");
             } catch (e) {
                 console.error("Erro ao salvar fichas localmente:", e);
                 alert("Erro ao salvar fichas: O armazenamento local pode estar cheio.");
             }
        }


        function carregarFichas() {
            const fichasSalvas = localStorage.getItem('fichasRPG');
            if (fichasSalvas) {
                fichas = JSON.parse(fichasSalvas);
            } else {
                fichas = {}; // Começa vazio se não houver nada salvo
            }
            atualizarListaFichas();
        }

        function carregarDadosFicha(fichaId) {
            const fichaData = fichas[fichaId];
            if (!fichaData) return;

            fichaForm.reset(); // Limpa o formulário antes de carregar
            limparTabelaAtaques(); // Limpa a tabela de ataques

            for (const key in fichaData) {
                const element = fichaForm.elements[key];
                if (element) {
                     if (element.type === 'checkbox') {
                         element.checked = fichaData[key];
                     } else {
                         element.value = fichaData[key];
                    }
                }
            }

            // Carregar ataques/magias
            if (fichaData['ataques_magias'] && Array.isArray(fichaData['ataques_magias'])) {
                fichaData['ataques_magias'].forEach(ataque => adicionarLinhaAtaque(ataque));
            }


            calcularTodosModificadores(); // Recalcula modificadores após carregar
            currentFichaId = fichaId;
            atualizarListaFichas(); // Destaca a ficha carregada na lista
            console.log("Ficha carregada:", fichaId);
        }

        function limparFormulario() {
            fichaForm.reset();
            limparTabelaAtaques();
            // Definir valores padrão para números e calcular modificadores
            atributos.forEach(attr => {
                const input = document.getElementById(attr);
                if(input) input.value = 10;
            });
            const nivelInput = document.getElementById('nivel');
            if(nivelInput) nivelInput.value = 1;
            const xpInput = document.getElementById('xp');
            if(xpInput) xpInput.value = 0;
             const pvMaxInput = document.getElementById('pv_maximos');
            if(pvMaxInput) pvMaxInput.value = 10;
             const pvAtualInput = document.getElementById('pv_atuais');
            if(pvAtualInput) pvAtualInput.value = 10;
            const caInput = document.getElementById('ca');
            if(caInput) caInput.value = 10;
             const deslocamentoInput = document.getElementById('deslocamento');
            if(deslocamentoInput) deslocamentoInput.value = '9m';
            // Limpar checkboxes de morte
            ['morte_suc1', 'morte_suc2', 'morte_suc3', 'morte_falha1', 'morte_falha2', 'morte_falha3'].forEach(id => {
                const check = document.getElementById(id);
                if (check) check.checked = false;
            });
             // Limpar dinheiro
             ['pc', 'pp', 'pe', 'po', 'pl'].forEach(id => {
                const input = document.getElementById(id);
                if (input) input.value = 0;
            });
            // Limpar campos de texto longos
            ['equipamento', 'tracos_personalidade', 'ideais', 'vinculos', 'fraquezas', 'caracteristicas_talentos', 'idiomas_proficiencias'].forEach(id => {
                const textarea = document.getElementById(id);
                if (textarea) textarea.value = '';
            });


            calcularTodosModificadores();
        }


        // --- Funções da Interface (Sidebar e Fichas) ---
        function atualizarListaFichas() {
            listaFichasUl.innerHTML = ''; // Limpa a lista atual
            Object.keys(fichas).sort((a, b) => (fichas[a]?.nome || '').localeCompare(fichas[b]?.nome || '')).forEach(fichaId => {
                const li = document.createElement('li');
                li.dataset.fichaId = fichaId;
                li.textContent = fichas[fichaId]?.nome || `Ficha ${fichaId.substring(0, 4)}...`; // Mostra nome ou ID parcial
                if (fichaId === currentFichaId) {
                    li.classList.add('active');
                }
                li.addEventListener('click', () => selecionarFicha(fichaId));
                listaFichasUl.appendChild(li);
            });
        }

        function criarNovaFicha() {
            const novoId = `ficha_${Date.now()}`; // Gera um ID único baseado no tempo
            currentFichaId = novoId;
            fichas[novoId] = { nome: "Nova Ficha" }; // Adiciona ficha básica
            limparFormulario(); // Limpa o formulário para a nova ficha
             document.getElementById('nome').value = "Nova Ficha"; // Pré-preenche o nome
            calcularTodosModificadores(); // Garante que os cálculos sejam feitos
            atualizarListaFichas(); // Atualiza a lista para incluir e destacar a nova
            salvarDados(); // Salva o estado inicial da nova ficha
            salvarFichasLocal(); // Salva no localStorage
            console.log("Nova ficha criada:", novoId);
        }

        function selecionarFicha(fichaId) {
            if (currentFichaId && fichas[currentFichaId]) {
                salvarDados(); // Salva a ficha atual antes de mudar
            }
            carregarDadosFicha(fichaId);
        }

        function excluirFichaAtual() {
             if (!currentFichaId) {
                 alert("Nenhuma ficha selecionada para excluir.");
                 return;
             }

            const nomeFicha = fichas[currentFichaId]?.nome || `Ficha ${currentFichaId.substring(0,4)}...`;
             if (confirm(`Tem certeza que deseja excluir a ficha "${nomeFicha}"? Esta ação não pode ser desfeita.`)) {
                delete fichas[currentFichaId];
                 salvarFichasLocal(); // Salva a remoção no localStorage
                 currentFichaId = null;
                 limparFormulario();
                 atualizarListaFichas();

                 // Tenta selecionar a próxima ficha da lista, se houver
                 const proximaFichaId = Object.keys(fichas)[0];
                 if (proximaFichaId) {
                     selecionarFicha(proximaFichaId);
                 } else {
                     // Se não houver mais fichas, cria uma nova
                     criarNovaFicha();
                 }
                 console.log("Ficha excluída:", nomeFicha);
             }
        }

         // --- Funções de Ataques/Magias ---
        function adicionarLinhaAtaque(ataque = { nome: '', bonus: '', dano: '', acao: 'Ação'}) {
             const newRow = ataquesMagiasTbody.insertRow();
             newRow.innerHTML = `
                 <td><input type="text" value="${ataque.nome}" placeholder="Nome Ataque/Magia"></td>
                 <td><input type="text" value="${ataque.bonus}" placeholder="+X"></td>
                 <td><input type="text" value="${ataque.dano}" placeholder="XdY + Mod Tipo"></td>
                 <td>
                     <select>
                         <option ${ataque.acao === 'Ação' ? 'selected' : ''}>Ação</option>
                         <option ${ataque.acao === 'Ação Bônus' ? 'selected' : ''}>Ação Bônus</option>
                         <option ${ataque.acao === 'Reação' ? 'selected' : ''}>Reação</option>
                         <option ${ataque.acao === 'Outro' ? 'selected' : ''}>Outro</option>
                     </select>
                 </td>
                 <td><button type="button" class="remove-item-btn" onclick="removerLinhaAtaque(this)">X</button></td>
             `;
             // Adiciona event listeners aos novos inputs para salvar automaticamente
             newRow.querySelectorAll('input, select').forEach(input => {
                 input.addEventListener('change', salvarDados);
                 input.addEventListener('input', salvarDados); // Salva enquanto digita também
            });
        }

         function removerLinhaAtaque(button) {
             const row = button.closest('tr');
             row.remove();
             salvarDados(); // Salva após remover a linha
         }

        function limparTabelaAtaques() {
            ataquesMagiasTbody.innerHTML = '';
        }


        // --- Setup dos Event Listeners ---
        function setupEventListeners() {
             // Salvar automaticamente ao alterar qualquer campo do formulário
             fichaForm.addEventListener('input', (event) => {
                 // Evita salvar a cada tecla em textareas grandes para performance
                 if (event.target.tagName === 'TEXTAREA' || event.target.type === 'text' || event.target.type === 'number' || event.target.type === 'checkbox' || event.target.tagName === 'SELECT') {
                     salvarDados();
                      // Atualiza cálculos se necessário
                      const id = event.target.id;
                      const name = event.target.name;
                     if (atributos.includes(id)) {
                         atualizarModificadorAtributo(id);
                     } else if (id === 'nivel') {
                         atualizarBonusProficiencia();
                     } else if (name && (name.startsWith('prof_') || name.startsWith('prof_tr_'))) {
                          atualizarPericiasEtestesResistencia();
                      }
                 }
             });

             novaFichaBtn.addEventListener('click', criarNovaFicha);
             excluirFichaBtn.addEventListener('click', excluirFichaAtual);
             salvarLocalBtn.addEventListener('click', () => {
                 salvarDados(); // Garante que a ficha atual esteja salva no objeto 'fichas'
                 salvarFichasLocal(); // Salva tudo no localStorage
                 alert('Todas as fichas foram salvas localmente!');
             });
             toggleDarkModeBtn.addEventListener('click', toggleDarkMode);
            imagemFundoInput.addEventListener('change', mudarPlanoDeFundo);
             removerPlanoDeFundoBtn.addEventListener('click', removerPlanoDeFundo);
             addAtaqueMagiaBtn.addEventListener('click', () => adicionarLinhaAtaque());

            // Firebase (Comentado por padrão)
            // conectarFirebaseBtn.addEventListener('click', conectarFirebase);
            // salvarFirebaseBtn.addEventListener('click', salvarFirebase);
            // carregarFirebaseBtn.addEventListener('click', carregarFirebase);

             // Fechar seletor de cor ao clicar fora
             document.addEventListener('click', function(event) {
                 if (!backgroundColorSelector.contains(event.target) && !corFundoBtn.contains(event.target)) {
                     backgroundColorSelector.style.display = 'none';
                 }
             });
        }


        // --- Funções de Aparência (Dark Mode, Plano de Fundo, Cor) ---
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            // Ajusta o texto do botão
            toggleDarkModeBtn.textContent = isDarkMode ? 'Modo Claro' : 'Modo Escuro';
        }

        function aplicarTemaSalvo() {
            const darkModeSalvo = localStorage.getItem('darkMode') === 'true';
            if (darkModeSalvo) {
                document.body.classList.add('dark-mode');
                toggleDarkModeBtn.textContent = 'Modo Claro';
            } else {
                 document.body.classList.remove('dark-mode');
                 toggleDarkModeBtn.textContent = 'Modo Escuro';
            }
        }

         function mudarPlanoDeFundo(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imageUrl = e.target.result;
                    document.body.style.backgroundImage = `url('${imageUrl}')`;
                     try {
                        localStorage.setItem('backgroundImageURL', imageUrl); // Salva a URL da imagem
                        console.log("Imagem de fundo salva localmente.");
                    } catch (error) {
                        console.error("Erro ao salvar imagem no localStorage (pode ser muito grande):", error);
                         alert("Não foi possível salvar a imagem de fundo. Ela pode ser muito grande para o armazenamento local.");
                         // Reverte para o estado anterior se o salvamento falhar
                         removerPlanoDeFundo();
                    }
                }
                 reader.readAsDataURL(file); // Converte imagem para base64 URL
            }
        }

        function removerPlanoDeFundo() {
            document.body.style.backgroundImage = 'none';
            localStorage.removeItem('backgroundImageURL'); // Remove a URL salva
            imagemFundoInput.value = ''; // Limpa o input de arquivo
            console.log("Imagem de fundo removida.");
        }

        function aplicarPlanoDeFundoSalvo() {
            const savedImageUrl = localStorage.getItem('backgroundImageURL');
            if (savedImageUrl) {
                document.body.style.backgroundImage = `url('${savedImageUrl}')`;
            } else {
                document.body.style.backgroundImage = 'none';
            }
        }

        // Background Color Functionality
        corFundoBtn.onclick = () => {
            backgroundColorSelector.style.display = backgroundColorSelector.style.display === 'none' || backgroundColorSelector.style.display === '' ? 'flex' : 'none';
        };
        backgroundColorSelector.addEventListener('click', (event) => {
            if (event.target.classList.contains('color-option')) {
                const color = event.target.dataset.color;
                document.body.style.backgroundColor = color;
                 // Salva a cor no localStorage
                 localStorage.setItem('backgroundColor', color);
                // Atualiza a classe 'active'
                document.querySelectorAll('#background-color-selector .color-option').forEach(option => option.classList.remove('active'));
                event.target.classList.add('active');
                 // Fecha o seletor
                 backgroundColorSelector.style.display = 'none';
                 console.log("Cor de fundo salva:", color);
                // Opcional: Se quiser salvar a cor por ficha também, descomente a linha abaixo
                 // salvarDados();
            }
        });

        function aplicarCorDeFundoSalva() {
             const savedColor = localStorage.getItem('backgroundColor');
             const defaultColor = '#f0e6d2'; // Cor padrão
             const colorToApply = savedColor || defaultColor;

             document.body.style.backgroundColor = colorToApply;

             // Atualiza a classe 'active' no seletor de cor
             document.querySelectorAll('#background-color-selector .color-option').forEach(option => {
                 option.classList.toggle('active', option.dataset.color === colorToApply);
             });
        }


        // Funções Firebase (Exemplo - requer configuração e biblioteca descomentada)
        /*
        function conectarFirebase() {
             // Lógica para conectar/autenticar, se necessário
             alert("Firebase conectado (simulado)");
        }

        function salvarFirebase() {
            if (!database) {
                alert("Firebase não inicializado.");
                return;
            }
            if (currentFichaId) {
                 salvarDados(); // Garante que os dados atuais estão no objeto 'fichas'
                const fichaAtual = fichas[currentFichaId];
                database.ref('fichas/' + currentFichaId).set(fichaAtual)
                    .then(() => alert(`Ficha "${fichaAtual.nome || 'sem nome'}" salva no Firebase com sucesso!`))
                    .catch((error) => alert("Erro ao salvar no Firebase: " + error));
             } else {
                alert("Nenhuma ficha selecionada para salvar.");
            }
             // Para salvar TODAS as fichas:
             // database.ref('fichas').set(fichas)
             //    .then(() => alert("TODAS as fichas salvas no Firebase!"))
             //    .catch((error) => alert("Erro ao salvar todas as fichas: " + error));

        }

        function carregarFirebase() {
             if (!database) {
                alert("Firebase não inicializado.");
                return;
            }
             database.ref('fichas').once('value')
                 .then((snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        // Mesclar ou substituir fichas locais? Por enquanto, substitui.
                        if (confirm("Carregar fichas do Firebase substituirá as fichas locais não salvas no Firebase. Continuar?")) {
                             fichas = data;
                            salvarFichasLocal(); // Salva as fichas carregadas localmente
                             currentFichaId = null; // Desseleciona a ficha atual
                             atualizarListaFichas();
                            const primeiraFicha = Object.keys(fichas)[0];
                            if (primeiraFicha) {
                                selecionarFicha(primeiraFicha); // Seleciona a primeira carregada
                            } else {
                                limparFormulario(); // Limpa se não houver fichas no Firebase
                            }
                             alert("Fichas carregadas do Firebase!");
                        }
                    } else {
                        alert("Nenhuma ficha encontrada no Firebase.");
                    }
                })
                .catch((error) => alert("Erro ao carregar do Firebase: " + error));
        }
        */

    </script>
</body>
</html>
